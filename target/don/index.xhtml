<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
	<meta charset="UTF-8" />
	<h:outputScript name="layout.js" library="js"/>
</h:head>
<h:body>

	<h:form>
		<p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true" />

		<p:panel header="Pagamento de Entregadores" id="panel">

			<h:panelGrid columns="2">
				<p:outputLabel value="Data do Movimento" />
				<p:datePicker id="dataMovimento" value="#{entregaView.dataSelecionada}" required="true" locale="pt">
					<p:ajax event="dateSelect" listener="#{entregaView.onDateSelect}"
						update="panel" />
				</p:datePicker>
				<p:commandButton value="Apagar" action="#{entregaView.apagarMovimento}" update="msgs">
					<p:confirm header="Confirmação"
						message="Certeza que deseja prosseguir?"
						icon="pi pi-exclamation-triangle" />
				</p:commandButton>
				
				<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					responsive="true" width="350">
					<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no ui-button-flat" />
					<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" />
				</p:confirmDialog>
			</h:panelGrid>


			<p:fileUpload mode="advanced" multiple="false"
				allowTypes="/(\.|\/)(xlsx)$/" auto="true" label="Selecionar Arquivo"
				listener="#{entregaView.fileUpload}" update="entregasList msgs" />



			<p:dataTable id="entregasList" var="entrega"
				value="#{entregaView.entregas}" lazy="true">

				<p:column>
					<h:outputLabel value="#{entrega.qtde}" />
				</p:column>

				<p:column headerText="Pedido">
					<h:outputLabel value="#{entrega.pedido}" />
				</p:column>

				<p:column headerText="Data da Entrega">
					<h:outputLabel value="#{entrega.dataFormatada}" />
				</p:column>

				<p:column headerText="Entregador">
					<h:outputLabel value="#{entrega.entregador}" />
				</p:column>

				<p:column headerText="Valor">
					<h:outputLabel value="#{entrega.valor}">
						<f:convertNumber type="currency" currencySymbol="R$" />
					</h:outputLabel>
				</p:column>

			</p:dataTable>
		</p:panel>
	</h:form>


</h:body>
</html>