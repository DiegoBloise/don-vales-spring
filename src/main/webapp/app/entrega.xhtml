<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template/template.xhtml">

	<ui:define name="head">
		<h:outputScript name="layout.js" library="js"/>
	</ui:define>

    <ui:define name="content">

		<h:form>

			<div class="flex flex-column w-full">

				<p:toolbar styleClass="mt-3">
					<p:toolbarGroup>
						<div class="flex flex-row justify-content-center align-content-center">
							<div class="mr-5">
								<p:outputLabel for="@next" value="Data do Movimento"/>
								<p:datePicker id="dataMovimento" value="#{acertoView.dataSelecionada}" required="true" locale="pt">
									<p:ajax event="dateSelect" listener="#{acertoView.onDateSelect}"/>
								</p:datePicker>
							</div>

							<p:commandButton value="Apagar" action="#{acertoView.apagarMovimento}" update="@root:@id(messages)">
								<p:confirm header="Confirmação"
								message="Certeza que deseja prosseguir?"
								icon="pi pi-exclamation-triangle" />
							</p:commandButton>
						</div>
					</p:toolbarGroup>
				</p:toolbar>

				<p:fileUpload mode="advanced" multiple="false"
						allowTypes="/(\.|\/)(xlsx)$/" auto="true" label="Selecionar Arquivo"
						listener="#{acertoView.fileUpload}" update="entregasList @root:@id(messages)" styleClass="mt-3"/>
			</div>

			<p:dataTable id="entregasList" var="entrega" rendered="#{not empty acertoView.entregas}"
						value="#{acertoView.entregas}" styleClass="mt-3">

				<p:column>
					<h:outputLabel value="#{entrega.qtde}" />
				</p:column>

				<p:column headerText="Pedido">
					<h:outputLabel value="#{entrega.pedido}" />
				</p:column>

				<p:column headerText="Data da Entrega">
					<h:outputLabel value="#{entrega.dataFormatada}" />
				</p:column>

				<p:column headerText="Entregador">
					<h:outputLabel value="#{entrega.entregador}" />
				</p:column>

				<p:column headerText="Valor">
					<h:outputLabel value="#{entrega.valor}">
						<f:convertNumber type="currency" currencySymbol="R$" />
					</h:outputLabel>
				</p:column>

			</p:dataTable>

			<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"
					responsive="true" width="350">
				<p:commandButton value="Não" type="button"
						styleClass="ui-confirmdialog-no ui-button-flat" />
				<p:commandButton value="Sim" type="button"
						styleClass="ui-confirmdialog-yes" />
			</p:confirmDialog>

		</h:form>

	</ui:define>

</ui:composition>